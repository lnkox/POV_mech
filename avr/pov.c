/*****************************************************
This program was produced by the
CodeWizardAVR V2.05.0 Professional
Automatic Program Generator
© Copyright 1998-2010 Pavel Haiduc, HP InfoTech s.r.l.
http://www.hpinfotech.com

Project : 
Version : 
Date    : 29.04.2014
Author  : 
Company : 
Comments: 


Chip type               : ATmega8
Program type            : Application
AVR Core Clock frequency: 8,000000 MHz
Memory model            : Small
External RAM size       : 0
Data Stack size         : 256
*****************************************************/

#define d1 PORTB.4
#define d2 PORTB.3
#define d3 PORTB.2
#define d4 PORTB.1
#define d5 PORTB.0
#define d6 PORTD.7
#define d7 PORTD.6
#define d8 PORTD.5
#define d9 PORTB.7
#define d10 PORTB.6
#define d11 PORTD.4
#define d12 PORTD.3
#define d13 PORTC.0
#define d14 PORTD.1
#define d15 PORTD.0
#define d16 PORTC.5
#define d17 PORTC.4
#define d18 PORTC.3
#define d19 PORTC.2
#define d20 PORTC.1

#define sens PIND.1
#define but PINB.5
 
#define max_line 200
#define max_pic 5


flash char ae[]={0,1,2,4,8,16,32,64,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,64,32,16,8,4,2,1,1,3,7,15,31,63,127,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127,63,31,15,7,3,1,0,1,3,15,31,63,127,255,255,255,255,255,255,127,63,31,15,7,3,1};
flash char be[]={0,0,0,0,0,0,0,0,0,1,2,4,8,16,32,64,128,0,0,0,0,0,0,0,0,128,64,32,16,8,4,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,7,15,31,63,127,255,255,255,255,255,255,255,255,255,255,127,63,31,15,7,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,192,241,255,255,249,224,192,128,0,0,0,0,0};
flash char ce[]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,4,8,8,4,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,7,15,15,7,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,14,15,15,15,15,15,15,15,15,15,15,15,14,12,8,0};

flash char a1[]={0,0,224,240,120,28,12,4,230,226,99,99,99,226,198,132,12,28,248,240,192,0,0,0,0,0,128,240,252,254,254,255,255,255,254,254,252,248,240,248,252,254,254,255,255,254,254,254,252,240,0,0,0,8,24,28,62,254,255,255,250,224,128,0,0,0,0,0,0,0,0,0,0,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,248,240,240,224,224,224,192,192,128,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,16,8,4,4,0,0,2,2,2,128,4,4,8,0,64,0,0,0,0,0,0,0,0,0,0,128,192,240,112,240,216,24,24,24,24,56,56,112,240,224,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,192,192,224,240,240,248,248,252,252,192,0,0,0,0,0,0,0,0,0,0};
flash char b1[]={0,6,31,127,224,128,0,0,127,127,4,14,14,63,123,113,0,128,240,255,63,6,0,0,0,0,0,1,7,31,31,63,63,127,255,255,255,255,255,255,255,255,255,127,63,63,31,15,7,1,0,0,0,0,0,0,0,0,7,31,127,255,255,127,254,252,144,0,0,0,0,0,0,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,127,127,63,63,63,31,31,15,15,15,7,7,3,2,0,0,0,0,0,0,0,0,0,0,0,0,3,12,48,1,130,133,254,134,129,128,64,16,4,1,0,0,0,0,0,0,0,0,0,0,12,63,251,192,128,1,3,7,14,28,56,112,224,192,192,243,127,28,0,0,0,0,0,0,8,8,24,60,60,124,126,254,252,248,240,224,240,248,126,127,63,31,15,7,7,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0};
flash char c1[]={0,0,0,0,1,3,7,6,14,12,12,12,12,14,14,6,7,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,7,15,7,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,7,14,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,7,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,3,7,7,6,6,6,6,6,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

flash char a2[]={0,0,128,224,56,14,2,3,131,131,195,255,254,192,64,192,192,64,192,192,64,192,192,64,192,192,0,0,0,0,0,0,0,0,0,0,0,0,0,128,128,128,128,192,240,240,184,156,142,134,134,130,130,131,131,131,255,255,131,130,130,130,134,142,142,252,248,240,192,0,0,0,0,0,0,0,0,0,192,224,240,252,254,254,254,254,254,190,158,158,142,130,128,128,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,192,240,56,12,6,3,131,131,195,195,255,254,0,0,0,0,0,0,0,0,0,0,192,240,56,28,14,6,131,131,131,131,131,131,131,131,134,14,28,56,240,192,0,0,0,0,0,0,0,252,2,34,33,34,2,252,0,0,0,0,0,0,0,0,0,0,176,176,184,184,176,176,176,176,176,176,176,176,176,176,184,184,176,176,48,0,0,0,0,0,0,0};
flash char b2[]={0,0,63,255,255,255,63,31,31,31,255,255,255,255,240,255,255,240,255,63,16,31,31,240,255,255,0,0,0,0,0,0,240,240,252,254,254,63,31,31,31,31,31,63,255,255,255,255,255,255,255,255,255,255,255,255,255,255,63,31,31,31,31,31,63,255,255,255,255,124,0,0,0,0,0,0,12,14,15,15,15,207,255,255,255,127,63,31,15,15,7,3,1,0,0,0,192,224,240,248,254,255,255,126,12,134,231,62,31,31,31,63,255,255,255,255,255,255,255,255,63,31,31,30,62,254,252,248,0,0,0,63,255,206,135,15,31,63,127,243,237,239,241,127,127,63,31,7,198,255,127,6,0,0,0,0,0,8,239,236,236,236,236,236,239,8,0,0,0,0,0,0,0,0,0,255,255,247,247,227,247,255,255,255,255,255,255,255,247,247,247,255,255,0,0,0,0,0,0,0,0};
flash char c2[]={0,0,0,0,1,3,14,12,12,12,7,3,0,0,0,0,0,1,7,14,12,12,12,7,1,0,0,0,0,0,0,0,0,0,1,7,7,12,8,8,8,8,12,6,7,3,1,1,1,1,1,1,1,1,1,1,3,7,6,12,8,8,8,12,12,7,3,1,0,0,0,0,0,0,0,0,0,0,0,4,6,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,1,7,14,12,12,12,12,7,3,1,1,1,1,1,7,14,12,12,12,12,7,3,1,0,0,0,0,0,1,3,7,6,12,12,12,15,15,12,12,12,14,6,3,1,0,0,0,0,0,0,0,0,0,0,7,0,0,0,7,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0};

flash char a3[]={0,0,0,0,0,0,0,0,0,224,255,240,0,0,128,224,240,24,12,6,6,134,134,198,198,254,252,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,224,192,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,224,224,224,192,192,192,0,0,0,16,16,16,240,240,128,0,0,0,0,0,0,0,0,0,204,252,116,248,252,242,242,242,242,242,126,254,254,252,0,0,0,0,0,0,0,0,254,194,194,194,194,194,194,194,194,254,8,240,224,0,0,0,0,0,0,0,0,0,0,128,64,32,32,32,32,224,0,224,240,48,240,48,240,240,48,224,0,0,0,0,0,0,0,0,0,0,0,0,240,224,0,0,128,64,64,64,192,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
flash char b3[]={0,0,192,224,62,30,31,63,127,255,255,255,255,255,255,255,255,255,255,15,7,7,7,7,7,15,255,248,96,0,0,0,0,0,0,0,224,97,51,23,23,54,238,236,252,252,252,248,248,254,254,254,255,254,254,254,63,31,31,23,48,224,128,0,0,0,0,0,0,128,224,48,16,24,24,16,16,248,255,255,254,254,254,255,127,31,15,135,243,17,31,24,24,16,48,224,0,0,0,0,255,255,255,254,125,191,191,191,129,127,255,255,255,255,0,0,0,0,0,0,0,0,255,255,255,199,131,131,199,255,255,255,0,128,3,24,32,0,128,0,0,0,0,0,255,249,248,56,60,62,254,255,252,253,253,253,253,61,61,61,125,253,252,0,0,0,0,0,0,0,0,0,0,240,255,255,60,59,56,248,248,252,255,255,120,112,240,224,0,0,0,0,0,0,0,0,0,0,0,0,0};
flash char c3[]={0,0,1,3,6,4,4,6,6,1,0,0,0,0,0,0,0,1,3,7,6,6,6,6,6,7,3,1,0,0,0,0,0,0,0,0,3,6,6,4,4,6,3,1,1,1,1,1,1,1,1,1,1,1,1,3,6,4,4,4,6,3,0,0,0,0,0,0,0,0,3,7,6,4,4,6,6,3,0,0,0,0,2,2,0,0,0,0,3,6,6,4,4,6,7,3,0,0,0,0,7,7,5,6,7,7,7,7,7,7,6,7,7,7,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,7,7,6,1,2,0,2,1,0,0,0,0,0,0,0,3,2,6,2,3,0,0,0,0,0,1,2,6,6,3,1,0,0,0,0,0,0,2,2,2,2,2,1,1,3,2,6,2,3,1,1,1,3,6,2,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0};

flash char a4[]={0,0,0,0,0,0,0,0,0,224,255,240,0,0,128,224,240,24,12,6,6,134,134,198,198,254,252,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,224,192,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,224,224,224,192,192,192,0,0,0,16,16,16,240,240,128,0,0,0,0,0,0,0,0,0,204,252,116,248,252,242,242,242,242,242,126,254,254,252,0,0,0,0,0,0,0,0,254,194,194,194,194,194,194,194,194,254,8,240,224,0,0,0,0,0,0,0,0,0,0,128,64,32,32,32,32,224,0,224,240,48,240,48,240,240,48,224,0,0,0,0,0,0,0,0,0,0,0,0,240,224,0,0,128,64,64,64,192,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
flash char b4[]={0,0,192,224,62,30,31,63,127,255,255,255,255,255,255,255,255,255,255,15,7,7,7,7,7,15,255,248,96,0,0,0,0,0,0,0,224,97,51,23,23,54,238,236,252,252,252,248,248,254,254,254,255,254,254,254,63,31,31,23,48,224,128,0,0,0,0,0,0,128,224,48,16,24,24,16,16,248,255,255,254,254,254,255,127,31,15,135,243,17,31,24,24,16,48,224,0,0,0,0,255,255,255,254,125,191,191,191,129,127,255,255,255,255,0,0,0,0,0,0,0,0,255,255,255,199,131,131,199,255,255,255,0,128,3,24,32,0,128,0,0,0,0,0,255,249,248,56,60,62,254,255,252,253,253,253,253,61,61,61,125,253,252,0,0,0,0,0,0,0,0,0,0,240,255,255,60,59,56,248,248,252,255,255,120,112,240,224,0,0,0,0,0,0,0,0,0,0,0,0,0};
flash char c4[]={0,0,1,3,6,4,4,6,6,1,0,0,0,0,0,0,0,1,3,7,6,6,6,6,6,7,3,1,0,0,0,0,0,0,0,0,3,6,6,4,4,6,3,1,1,1,1,1,1,1,1,1,1,1,1,3,6,4,4,4,6,3,0,0,0,0,0,0,0,0,3,7,6,4,4,6,6,3,0,0,0,0,2,2,0,0,0,0,3,6,6,4,4,6,7,3,0,0,0,0,7,7,5,6,7,7,7,7,7,7,6,7,7,7,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,7,7,6,1,2,0,2,1,0,0,0,0,0,0,0,3,2,6,2,3,0,0,0,0,0,1,2,6,6,3,1,0,0,0,0,0,0,2,2,2,2,2,1,1,3,2,6,2,3,1,1,1,3,6,2,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0};

flash char a5[]={0,0,0,0,0,224,240,240,128,40,40,40,200,200,200,40,40,40,208,112,16,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,196,254,228,196,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,240,240,252,248,240,240,0,0,0,0,0,0,0,0,0,0,0,0,0,224,112,56,28,12,14,14,14,12,12,28,56,240,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,224,96,96,96,96,96,112,120,120,120,120,96,96,96,96,96,224,192,0,0,0,0,0,0,0,0,32,224,192,192,192,192,192,128,192,240,252,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,200,248,200,8,0,0,0,0,0,0,0,0,0,0};
flash char b5[]={0,0,0,0,0,1,3,5,25,19,102,123,195,131,195,123,126,31,15,15,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,224,224,224,255,255,255,255,255,243,224,224,224,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,248,252,254,255,255,255,255,255,7,0,0,0,0,0,0,0,0,0,0,0,0,0,128,193,223,60,56,96,64,192,192,64,64,96,48,56,31,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,24,24,126,126,126,24,24,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,1,129,227,243,255,127,63,127,255,255,255,15,15,7,7,7,3,3,0,0,0,0,0,0,0,0,0,0,0,63,255,63,0,0,0,0,0,0,0,0,0,0,0};
flash char c5[]={0,0,0,0,0,0,0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,7,7,15,7,15,7,7,7,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,4,0,0,0,0,0,0,0,0,0,0,4,14,7,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,6,6,6,6,2,2,2,2,6,6,6,6,6,6,6,3,1,0,0,0,0,0,0,0,0,0,0,3,3,1,1,0,0,0,0,1,7,15,15,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0};


#include <mega8.h>
 #include <delay.h>  
 #include <sleep.h> 


char as=0,bs=0,cs=0;//поточний стан світлодіодів
char led_n=0;
char effect_line=0;
char curent_line=0;
char n_pic=0;
bit old_but=0;
char play_en=250;
void set_led_state(char a,char b,char c)
{
    as=a; bs=b; cs=c;
}
// Timer2 overflow interrupt service routine
interrupt [TIM2_OVF] void timer2_ovf_isr(void)
{
TCNT2=0xCE;
    led_n++;
    if (led_n==21) {led_n=1;} 
    PORTB=0; PORTC=0; PORTD=0;
    switch(led_n)
		{
		case 1: 
			d1=(as & 0B00000001);// 1
			break;
		case 2: 
			d2=(as & 0B00000010);// 2 
			break;
		case 3: 
			d3=(as & 0B00000100);// 3 
			break;  
		case 4: 
			d4=(as & 0B00001000);// 4 
			break;
		case 5: 
			d5=(as & 0B00010000);// 5 
			break;
		case 6: 
			d6=(as & 0B00100000);// 6 
			break;
		case 7: 
			d7=(as & 0B01000000);// 7  
			break;
		case 8: 
			d8=(as & 0B10000000);// 8 
			break;
		case 9: 
			d9=(bs & 0B00000001);// 9 
			break;
		case 10: 
			d10=(bs & 0B00000010);// 10 
			break;
		case 11: 
			d11=(bs & 0B00000100);// 11 
			break;
		case 12: 
			d12=(bs & 0B00001000);// 12 
			break;
		case 13: 
			d13=(bs & 0B00010000);// 13  
			break;
		case 14: 
			d14=(bs & 0B00100000);// 14  
			break;
		case 15: 
			d15=(bs & 0B01000000);// 15  
			break;
		case 16: 
			d16=(bs & 0B10000000);// 16 
			break;
		case 17: 
			d17=(cs & 0B00000001);// 17  
			break;
		case 18: 
			d18=(cs & 0B00000010);// 18  
			break;
		case 19: 
			d19=(cs & 0B00000100);// 19 
			break;
		case 20: 
			d20=(cs & 0B00001000);// 20  
			break;
		default:
			break;
		}
}

// External Interrupt 0 service routine





void proces_effect(void)
{
    effect_line++;
    if (effect_line==100) {effect_line=0;}
    set_led_state(ae[effect_line],be[effect_line],ce[effect_line]);
    delay_ms(30);
}

void proces_play(void)
{
                curent_line++;
                if (curent_line==max_line)
                 {
                    curent_line=0;
                     
                    n_pic++;
                    if (n_pic>max_pic) n_pic=1;play_en--; 
                }
    if (n_pic==1){set_led_state(a1[curent_line],b1[curent_line],c1[curent_line]);}
    if (n_pic==2){set_led_state(a2[curent_line],b2[curent_line],c2[curent_line]);}   
    if (n_pic==3){set_led_state(a3[curent_line],b3[curent_line],c3[curent_line]);}
    if (n_pic==4){set_led_state(a4[curent_line],b4[curent_line],c4[curent_line]);} 
    if (n_pic==5){set_led_state(a5[curent_line],b5[curent_line],c5[curent_line]);}       
    //                if (n_pic==6){set_led_state(a6[curent_line],b6[curent_line],c6[curent_line]);} 
delay_us(700);  
}

void main(void)
{
// Declare your local variables here

// Input/Output Ports initialization
// Port B initialization
// Function: Bit7=Out Bit6=Out Bit5=In Bit4=Out Bit3=Out Bit2=Out Bit1=Out Bit0=Out 
DDRB=(1<<DDB7) | (1<<DDB6) | (0<<DDB5) | (1<<DDB4) | (1<<DDB3) | (1<<DDB2) | (1<<DDB1) | (1<<DDB0);
// State: Bit7=0 Bit6=0 Bit5=T Bit4=0 Bit3=0 Bit2=0 Bit1=0 Bit0=0 
PORTB=(0<<PORTB7) | (0<<PORTB6) | (0<<PORTB5) | (0<<PORTB4) | (0<<PORTB3) | (0<<PORTB2) | (0<<PORTB1) | (0<<PORTB0);

// Port C initialization
// Function: Bit6=Out Bit5=Out Bit4=Out Bit3=Out Bit2=Out Bit1=Out Bit0=out 
DDRC=(1<<DDC6) | (1<<DDC5) | (1<<DDC4) | (1<<DDC3) | (1<<DDC2) | (1<<DDC1) | (1<<DDC0);
// State: Bit6=0 Bit5=0 Bit4=0 Bit3=0 Bit2=0 Bit1=0 Bit0=T 
PORTC=(0<<PORTC6) | (0<<PORTC5) | (0<<PORTC4) | (0<<PORTC3) | (0<<PORTC2) | (0<<PORTC1) | (0<<PORTC0);

// Port D initialization
// Function: Bit7=Out Bit6=Out Bit5=Out Bit4=Out Bit3=Out Bit2=in Bit1=Out Bit0=Out 
DDRD=(1<<DDD7) | (1<<DDD6) | (1<<DDD5) | (1<<DDD4) | (1<<DDD3) | (0<<DDD2) | (1<<DDD1) | (1<<DDD0);
// State: Bit7=0 Bit6=0 Bit5=0 Bit4=0 Bit3=0 Bit2=0 Bit1=0 Bit0=0 
PORTD=(0<<PORTD7) | (0<<PORTD6) | (0<<PORTD5) | (0<<PORTD4) | (0<<PORTD3) | (0<<PORTD2) | (0<<PORTD1) | (0<<PORTD0);


// Timer/Counter 0 initialization
// Clock source: System Clock
// Clock value: Timer 0 Stopped
TCCR0=0x00;
TCNT0=0x00;


// Timer/Counter 1 initialization
// Clock source: System Clock
// Clock value: 125,000 kHz
// Mode: Normal top=0xFFFF
// OC1A output: Discon.
// OC1B output: Discon.
// Noise Canceler: Off
// Input Capture on Falling Edge
// Timer1 Overflow Interrupt: On
// Input Capture Interrupt: Off
// Compare A Match Interrupt: Off
// Compare B Match Interrupt: Off
TCCR1A=0x00;
TCCR1B=0x04;
TCNT1H=0x00;
TCNT1L=0x00;
ICR1H=0x00;
ICR1L=0x00;
OCR1AH=0x00;
OCR1AL=0x00;
OCR1BH=0x00;
OCR1BL=0x00;

// Timer/Counter 2 initialization
// Clock source: System Clock
// Clock value: 1000,000 kHz
// Mode: Normal top=0xFF
// OC2 output: Disconnected
// Timer Period: 0,25 ms
ASSR=0<<AS2;
TCCR2=(0<<PWM2) | (0<<COM21) | (0<<COM20) | (0<<CTC2) | (0<<CS22) | (1<<CS21) | (0<<CS20);
TCNT2=0x06;
OCR2=0x00;

// External Interrupt(s) initialization
// INT0: On
// INT0 Mode: Falling Edge
// INT1: Off
GICR|=(0<<INT1) | (0<<INT0);
MCUCR=(0<<ISC11) | (0<<ISC10) | (1<<ISC01) | (0<<ISC00);
GIFR=(0<<INTF1) | (1<<INTF0);

// Timer(s)/Counter(s) Interrupt(s) initialization
TIMSK=(0<<OCIE2) | (1<<TOIE2) | (0<<TICIE1) | (0<<OCIE1A) | (0<<OCIE1B) | (0<<TOIE1) | (0<<TOIE0);


// USART initialization
// USART disabled
UCSRB=0x00;

// Analog Comparator initialization
// Analog Comparator: Off
// Analog Comparator Input Capture by Timer/Counter 1: Off
ACSR=0x80;
SFIOR=0x00;

// ADC initialization
// ADC disabled
ADCSRA=0x00;

// SPI initialization
// SPI disabled
SPCR=0x00;

// TWI initialization
// TWI disabled
TWCR=0x00;

// Global enable interrupts
#asm("sei")

while (1)
      {
        if (but==0) {proces_effect();play_en=0;} 
        if (but==1 && old_but==0){set_led_state(0,0,0);play_en=100;} 
        old_but=but;  
        if (play_en>2) {proces_play();} 
      }
}
